<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Token Purchase Confirmation</title>
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0;">
    <div style="max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f8f9ff;">
        <div style="background-color: #ffffff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h1 style="color: #4f46e5; margin: 0;">Web Analyzer Pro</h1>
                            <p style="color: #6b7280; margin: 5px 0 0 0;">Token Purchase Confirmation</p>
                        </div>
                        
                        <h2 style="color: #059669; margin-bottom: 20px;">üéâ Token Purchase Successful!</h2>
                        
                        <p style="margin-bottom: 20px;">Hello <strong>{user.name}</strong>,</p>
                        
                        <p style="margin-bottom: 25px;">Great news! Your token purchase has been processed successfully. You now have <strong>{token_purchase.token_count} additional tokens</strong> available in your account.</p>
                        
                        <div style="background-color: #f0fdf4; padding: 20px; border-radius: 8px; border-left: 4px solid #059669; margin: 25px 0;">
                            <h3 style="color: #047857; margin: 0 0 15px 0;">Purchase Details</h3>
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px 0; font-weight: 600; color: #374151;">Tokens Purchased:</td>
                                    <td style="padding: 8px 0; color: #059669; font-weight: bold;">{token_purchase.token_count} tokens</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0; font-weight: 600; color: #374151;">Amount Paid:</td>
                                    <td style="padding: 8px 0;">‚Çπ{token_purchase.total_amount}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0; font-weight: 600; color: #374151;">Invoice Number:</td>
                                    <td style="padding: 8px 0;">{token_purchase.invoice_number}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0; font-weight: 600; color: #374151;">Purchase Date:</td>
                                    <td style="padding: 8px 0;">{token_purchase.created_at.strftime('%d %b %Y, %H:%M UTC')}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0; font-weight: 600; color: #374151;">Order ID:</td>
                                    <td style="padding: 8px 0; font-size: 12px;">{token_purchase.razorpay_order_id}</td>
                                </tr>
                            </table>
                        </div>
                        
                        <div style="background-color: #eff6ff; padding: 20px; border-radius: 8px; border-left: 4px solid #3b82f6; margin: 25px 0;">
                            <h3 style="color: #1e40af; margin: 0 0 15px 0;">How Your Tokens Work</h3>
                            <ul style="margin: 0; padding-left: 20px; color: #374151;">
                                <li style="margin-bottom: 8px;">‚úÖ Tokens are immediately available in your account</li>
                                <li style="margin-bottom: 8px;">‚è∞ Valid for 1 year from purchase date</li>
                                <li style="margin-bottom: 8px;">üîÑ Used automatically when daily quota is exhausted</li>
                                <li style="margin-bottom: 8px;">üìä Track usage in your subscription dashboard</li>
                            </ul>
                        </div>
                        
                        <div style="text-align: center; margin: 35px 0;">
                            <a href="{url_for('user_subscriptions', _external=True)}" 
                               style="background-color: #4f46e5; color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: 600; font-size: 16px; margin-right: 10px;">
                                View Dashboard
                            </a>
                            <a href="{url_for('download_token_invoice', token_purchase_id=token_purchase.id, _external=True)}" 
                               style="background-color: #059669; color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: 600; font-size: 16px;">
                                Download Invoice
                            </a>
                        </div>
                        
                        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
                            <p style="margin-bottom: 10px; color: #374151; font-weight: 600;">üí° Pro Tips:</p>
                            <ul style="color: #6b7280; font-size: 14px; margin: 0; padding-left: 20px;">
                                <li>Your tokens will be used automatically when daily limits are reached</li>
                                <li>Monitor your token usage in the subscription dashboard</li>
                                <li>Consider purchasing tokens in advance for heavy usage periods</li>
                                <li>Contact support if you have any questions about token usage</li>
                            </ul>
                        </div>
                        
                        <div style="margin-top: 30px; text-align: center; color: #6b7280; font-size: 12px;">
                            <p style="margin: 0;">Thanks for choosing Web Analyzer Pro!<br><strong>The Web Analyzer Pro Team</strong></p>
                            <p style="margin: 10px 0 0 0;">Need help? Contact us at support@webanalyzerpro.com</p>
                        </div>
                    </div>
    </div>
</body>
</html>